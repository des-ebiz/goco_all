<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>강릉씨베이호텔</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css">
    <link rel="stylesheet" href="//static.go.co.kr/css/reset_custom.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="//static.go.co.kr/js/common_ver2.js"></script>
    <script>
        var base_url = "go.co.kr";
        var burl = "go.co.kr";
    </script>
    <script type="text/javascript" src="//static.go.co.kr/js/all_common.js"></script>
    <!--- 검색시 달력에서 이용 ---->
    <link rel="stylesheet" href="//static.go.co.kr/css/jquery-ui.css">
    <script type="text/javascript" src="//static.go.co.kr/js/jquery_ui.js"></script>
    <!--- 달력 한글화 --->
    <script type="text/javascript" src="//static.go.co.kr/js/datepicker_ko.js"></script>
    <script type="text/javascript" src="//static.go.co.kr/js/jquery.number.min.js"></script>
    <!-- Include Date Range Picker -->
    <script type="text/javascript" src="//static.go.co.kr/js/daterangepicker.js"></script>
    <link rel="stylesheet" type="text/css" href="//static.go.co.kr/css/daterangepicker.css">
    <style src="http://code.jquery.com/jquery-1.11.2.min.js"></style>
    <script type="text/javascript" src="//static.go.co.kr/js/iscroll.js"></script>

</head>

<body style="" cz-shortcut-listen="true">
    <form name="rform" id="rform" method="post" action="/home/landing/sms/post_save.php?md=WQwlVQ==">
        <!-- <input type="hidden" name="userid" id="userid" value="" /> -->
        <input type="hidden" name="paygubun" id="paygubun" value="ticket">
        <input type="hidden" name="options" value="pay_end">
        <input type="hidden" name="type_gubun" id="type_gubun" value="1">

        <!-- 190705 -->
        <link rel="stylesheet" href="//static.go.co.kr/css/mobile_landing.css">
        <!-- <link rel="stylesheet" href="/static/css/mobile_landing.css"> -->

        <script>
            $(function () {

                $(".bbqwrap, #but .bt").hide();

                $("#but").on('click', '.r_bt', function () {
                    $("#but .l_bt, #but .r_bt").hide();
                    $(".bbqwrap, #but .bt").show();
                    $("#but").addClass('on');
                });

                $("#but .r_bt").on('click', function () {
                    $(".fixed-bg").fadeToggle();
                    $(".bbqwrap").slideToggle();
                    $("#but").removeClass('on');
                    $("#wrap").bind("touchmove", function (e) {
                        e.preventDefault();
                    });
                });

                $(".i-x").on('click', function () {
                    $(".fixed-bg").fadeToggle();
                    $(".bbqwrap").slideToggle();
                    $("#but").removeClass('on');

                    $("#but .l_bt, #but .r_bt").show();
                    $("#but .bt").hide();

                    $("#wrap").unbind("touchmove");
                });

                $("#sdate").click(function () {
                    alert("체크인 날짜를 선택해주세요.");
                });
            });

            function break_o() {
                var string = $("#rform").serialize();

                $.ajax({
                    url: "./state.php",
                    type: "post",
                    data: "mode=break_o&" + string,
                    success: function (e) {
                        $("#break_o").html(e);
                        datereload();
                        myScroll3 = new IScroll('#blist', {
                            mouseWheel: false,
                            click: false,
                            bounce: false,
                            preventDefault: false,
                            tap: true
                        });
                        $("#fmoney").text("");
                    }
                });
            }
        </script>


        <!-- 190705 -->
        <div class="wrap seabayFacil-wrapper sub" id="wrap">
            <img src="http://img.go.co.kr/mobile/landing/seabayFacil_20190705/bf/img_01.jpg" alt="조식 패키지">

            <div class="fixed-bg" style="display: none;">
                <div class="dawrap">
                    <h1>아메리칸 조식뷔페
                        <a class="i-x" href="javascript:;"></a>
                    </h1>
                    <div id="blist" style="overflow-y:hidden;height:300px">
                        <div id="break_o">
                            <div class="da clr">
                                <span style="line-height:35px">투숙일<span style="font-size:12px">(조식 익일제공)</span></span>
                                <input type="text" class="date hasDatepicker" name="sdate" id="sdate" placeholder="날짜선택"
                                    readonly="" onfocus="this.blur()" style="cursor:default" onchange="break_o()">
                            </div>
                        </div>
                        <span style="color:#e63b3b;font-size:11px;">
                            ※ 36개월 미만 무료
                        </span>
                    </div>
                </div>

            </div>
        </div>
        <!-- 190705 -->
        <div class="but sub bf" id="but">
            <a href="" class="l_bt"><img src="http://img.go.co.kr/mobile/landing/seabayFacil_20190705/bf/bt_btn_01.jpg" alt="메인">메인화면</a>
            <a href="javascript:;" class="r_bt"><img src="http://img.go.co.kr/mobile/landing/seabayFacil_20190705/bf/bt_btn_02.jpg" alt="조식패키지 예약">한식당 다연 예약하기 <span class="gt">&gt;</span></a>
            <a href="#" class="bt" onclick="form_chk();" style="display: none;">결제하기<span id="fmoney"></span></a>
        </div>
        <input type="hidden" name="p_no" id="p_no" value="517">
        <input type="hidden" name="r_no" id="r_no" value="0">
        <input type="hidden" name="e" value="">
        <input type="hidden" name="m" value="">
    </form>


    <script type="text/javascript">
        $(function () {
            $("#tel").keyup(function (event) {
                event = event || window.event;
                var _val = this.value.trim();
                this.value = auto_hypen(_val);
            });
            datereload();

            ftext();
        });

        function datereload() {
            $.ajax({
                url: "/home/landing/sms/state.php",
                type: "post",
                data: "mode=options_date&p_no=517&r_no=0",
                success: function (e) {
                    var tmp = e.split("|");
                    var disabledDays = new Array();
                    for (var j = 0; j < tmp.length; j++) {
                        disabledDays.push(tmp[j]);
                    }
                    $("#sdate").datepicker({
                        dateFormat: "yy-mm-dd",
                        showAnim: "slideDown",
                        dayNamesMin: ["일", "월", "화", "수", "목", "금", "토"],
                        minDate: 0,
                        changeMonth: true,
                        changeYear: true,
                        beforeShowDay: function (date) {


                            var m = date.getMonth(),
                                d = date.getDate(),
                                y = date.getFullYear();
                            for (i = 0; i < disabledDays.length; i++) {
                                if ($.inArray(y + '-' + (m + 1) + '-' + d, disabledDays) != -
                                    1) {
                                    return [false];
                                }
                            }
                            return [true];

                        },

                        onSelect: function () {
                            break_o();
                            // 조식

                            fmoney();
                            ftext();


                        }

                    });
                }
            });
        }

        function form_chk() {
            if ($("input[name='none_product']").val() == "1") {
                alert("해당일자엔 조식을 이용하실 수 없습니다.");
                return false;
            }

            if ($("#sdate").val() == "") {
                alert("이용일을 선택해주세요.");
                return false;
            }

            var cnt = 0;
            for (var s = 0; s <= parseInt($("#total_cnt").val()); s++) {
                if ($("#tcount" + s).val() > 0) {
                    cnt = cnt + 1;
                }
            }

            if (cnt == 0) {
                alert("매수를 선택해주세요.");
                return false;
            }

            $('#rform').submit();
        }

        function fmoney() {
            var string = $("#rform").serialize();

            $.ajax({
                url: "./state.php",
                type: "post",
                data: "mode=fmoney&" + string,
                success: function (data) {
                    if (parseInt(data) == "0") {
                        $("#fmoney").text("");
                    } else {
                        $("#fmoney").text(" (" + number_format(data) + "원)");
                    }
                    ftext();
                }
            });
        }

        function ftext() {
            var string = $("#rform").serialize();

            $.ajax({
                url: "./state.php",
                type: "post",
                data: "mode=ftext&" + string,
                success: function (data) {
                    $("#ftext").html(data);
                }
            });
        }

        function auto_hypen(str) {
            str = str.replace(/[^0-9]/g, '');
            var tmp = '';
            if (str.length < 4) {
                return str;
            } else if (str.length < 7) {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3);
                return tmp;
            } else if (str.length < 11) {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3, 3);
                tmp += '-';
                tmp += str.substr(6);
                return tmp;
            } else {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3, 4);
                tmp += '-';
                tmp += str.substr(7);
                return tmp;
            }
            return str;
        }
    </script>

    
</body>

</html>